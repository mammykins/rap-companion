<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>RAP Companion</title>
  <meta name="description" content="A technical communication document intended to give assistance to people developing a Reproducible Analytical Pipeline using DataOps.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="RAP Companion" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="A technical communication document intended to give assistance to people developing a Reproducible Analytical Pipeline using DataOps." />
  <meta name="github-repo" content="mammykins/rap-companion" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="RAP Companion" />
  <meta name="twitter:site" content="@mammykins_" />
  <meta name="twitter:description" content="A technical communication document intended to give assistance to people developing a Reproducible Analytical Pipeline using DataOps." />
  <meta name="twitter:image" content="images/cover.png" />

<meta name="author" content="Matthew Gregory, Matthew Upson">


<meta name="date" content="2019-01-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="open.html">
<link rel="next" href="package.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102661099-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">RAP Companion</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#discovery"><i class="fa fa-check"></i><b>0.1</b> Discovery</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#getting-the-balance-right"><i class="fa fa-check"></i><b>0.2</b> Getting the balance right</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#inspiration"><i class="fa fa-check"></i><b>0.3</b> Inspiration</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ethics.html"><a href="ethics.html"><i class="fa fa-check"></i><b>2</b> Ethical Considerations</a><ul>
<li class="chapter" data-level="2.1" data-path="ethics.html"><a href="ethics.html#extra-detail"><i class="fa fa-check"></i><b>2.1</b> Extra detail</a><ul>
<li class="chapter" data-level="2.1.1" data-path="ethics.html"><a href="ethics.html#start-with-clear-user-need-and-public-benefit"><i class="fa fa-check"></i><b>2.1.1</b> Start with clear user need and public benefit</a></li>
<li class="chapter" data-level="2.1.2" data-path="ethics.html"><a href="ethics.html#use-data-and-tools-which-have-the-minimum-intrusion-necessary"><i class="fa fa-check"></i><b>2.1.2</b> Use data and tools which have the minimum intrusion necessary</a></li>
<li class="chapter" data-level="2.1.3" data-path="ethics.html"><a href="ethics.html#create-robust-data-science-models"><i class="fa fa-check"></i><b>2.1.3</b> Create robust data science models</a></li>
<li class="chapter" data-level="2.1.4" data-path="ethics.html"><a href="ethics.html#be-alert-to-public-perceptions"><i class="fa fa-check"></i><b>2.1.4</b> Be alert to public perceptions</a></li>
<li class="chapter" data-level="2.1.5" data-path="ethics.html"><a href="ethics.html#be-as-open-and-accountable-as-possible"><i class="fa fa-check"></i><b>2.1.5</b> Be as open and accountable as possible</a></li>
<li class="chapter" data-level="2.1.6" data-path="ethics.html"><a href="ethics.html#keep-data-secure"><i class="fa fa-check"></i><b>2.1.6</b> Keep data secure</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="why.html"><a href="why.html"><i class="fa fa-check"></i><b>3</b> Why RAP?</a><ul>
<li class="chapter" data-level="3.1" data-path="why.html"><a href="why.html#the-current-statistics-production-process"><i class="fa fa-check"></i><b>3.1</b> The current statistics production process</a><ul>
<li class="chapter" data-level="3.1.1" data-path="why.html"><a href="why.html#the-problem-with-this-approach"><i class="fa fa-check"></i><b>3.1.1</b> The problem with this approach</a></li>
<li class="chapter" data-level="3.1.2" data-path="why.html"><a href="why.html#desired-reproducible-analytical-pipeline"><i class="fa fa-check"></i><b>3.1.2</b> Desired Reproducible Analytical Pipeline</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="why.html"><a href="why.html#why-learning-to-rap-might-be-hard"><i class="fa fa-check"></i><b>3.2</b> Why learning to RAP might be hard</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exemplar.html"><a href="exemplar.html"><i class="fa fa-check"></i><b>4</b> Exemplar RAP</a><ul>
<li class="chapter" data-level="4.1" data-path="exemplar.html"><a href="exemplar.html#package-purpose"><i class="fa fa-check"></i><b>4.1</b> Package Purpose</a></li>
<li class="chapter" data-level="4.2" data-path="exemplar.html"><a href="exemplar.html#tidy-data"><i class="fa fa-check"></i><b>4.2</b> Tidy data</a><ul>
<li class="chapter" data-level="4.2.1" data-path="exemplar.html"><a href="exemplar.html#eesectors-tidy-data"><i class="fa fa-check"></i><b>4.2.1</b> eesectors tidy data</a></li>
<li class="chapter" data-level="4.2.2" data-path="exemplar.html"><a href="exemplar.html#what-does-our-eesectors-tidy-data-look-like"><i class="fa fa-check"></i><b>4.2.2</b> What does our eesectors tidy data look like?</a></li>
<li class="chapter" data-level="4.2.3" data-path="exemplar.html"><a href="exemplar.html#how-to-build-your-tidy-data"><i class="fa fa-check"></i><b>4.2.3</b> How to build your tidy data?</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="exemplar.html"><a href="exemplar.html#eesectors-package-exploration"><i class="fa fa-check"></i><b>4.3</b> <code>eesectors</code> Package Exploration</a><ul>
<li class="chapter" data-level="4.3.1" data-path="exemplar.html"><a href="exemplar.html#installation"><i class="fa fa-check"></i><b>4.3.1</b> Installation</a></li>
<li class="chapter" data-level="4.3.2" data-path="exemplar.html"><a href="exemplar.html#loading-the-package"><i class="fa fa-check"></i><b>4.3.2</b> Loading the package</a></li>
<li class="chapter" data-level="4.3.3" data-path="exemplar.html"><a href="exemplar.html#explore-the-package"><i class="fa fa-check"></i><b>4.3.3</b> Explore the package</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="exemplar.html"><a href="exemplar.html#chapter-plenary"><i class="fa fa-check"></i><b>4.4</b> Chapter plenary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="open.html"><a href="open.html"><i class="fa fa-check"></i><b>5</b> Open Source rather than proprietary</a></li>
<li class="chapter" data-level="6" data-path="vs.html"><a href="vs.html"><i class="fa fa-check"></i><b>6</b> Version Control</a><ul>
<li class="chapter" data-level="6.1" data-path="vs.html"><a href="vs.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="vs.html"><a href="vs.html#useful-resources"><i class="fa fa-check"></i><b>6.2</b> Useful resources</a><ul>
<li class="chapter" data-level="6.2.1" data-path="vs.html"><a href="vs.html#graphical-user-interface-focus"><i class="fa fa-check"></i><b>6.2.1</b> Graphical user interface focus</a></li>
<li class="chapter" data-level="6.2.2" data-path="vs.html"><a href="vs.html#git-and-rstudio"><i class="fa fa-check"></i><b>6.2.2</b> Git and RStudio</a></li>
<li class="chapter" data-level="6.2.3" data-path="vs.html"><a href="vs.html#command-line-focus"><i class="fa fa-check"></i><b>6.2.3</b> Command line focus</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="vs.html"><a href="vs.html#typical-workflow"><i class="fa fa-check"></i><b>6.3</b> Typical workflow</a></li>
<li class="chapter" data-level="6.4" data-path="vs.html"><a href="vs.html#branch-naming-etiquette"><i class="fa fa-check"></i><b>6.4</b> Branch naming etiquette</a></li>
<li class="chapter" data-level="6.5" data-path="vs.html"><a href="vs.html#watermarking"><i class="fa fa-check"></i><b>6.5</b> Watermarking</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="package.html"><a href="package.html"><i class="fa fa-check"></i><b>7</b> Packaging Code</a><ul>
<li class="chapter" data-level="7.1" data-path="package.html"><a href="package.html#essential-reading"><i class="fa fa-check"></i><b>7.1</b> Essential reading</a></li>
<li class="chapter" data-level="7.2" data-path="package.html"><a href="package.html#development-best-practices-for-your-package"><i class="fa fa-check"></i><b>7.2</b> Development best practices for your package</a><ul>
<li class="chapter" data-level="7.2.1" data-path="package.html"><a href="package.html#licensing-your-code"><i class="fa fa-check"></i><b>7.2.1</b> Licensing your code</a></li>
<li class="chapter" data-level="7.2.2" data-path="package.html"><a href="package.html#acting-as-the-custodian-for-your-code"><i class="fa fa-check"></i><b>7.2.2</b> Acting as the custodian for your code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="test.html"><a href="test.html"><i class="fa fa-check"></i><b>8</b> Unit test</a><ul>
<li class="chapter" data-level="8.1" data-path="test.html"><a href="test.html#further-reading"><i class="fa fa-check"></i><b>8.1</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="travis.html"><a href="travis.html"><i class="fa fa-check"></i><b>9</b> Automated Testing</a></li>
<li class="chapter" data-level="10" data-path="code-cover.html"><a href="code-cover.html"><i class="fa fa-check"></i><b>10</b> Code coverage</a></li>
<li class="chapter" data-level="11" data-path="dep.html"><a href="dep.html"><i class="fa fa-check"></i><b>11</b> Dependency management</a></li>
<li class="chapter" data-level="12" data-path="qa-data.html"><a href="qa-data.html"><i class="fa fa-check"></i><b>12</b> Quality Assurance of the pipeline</a><ul>
<li class="chapter" data-level="12.1" data-path="qa-data.html"><a href="qa-data.html#testing-the-input-data"><i class="fa fa-check"></i><b>12.1</b> Testing the input data</a></li>
<li class="chapter" data-level="12.2" data-path="qa-data.html"><a href="qa-data.html#murphys-law-and-errors-in-your-pipeline"><i class="fa fa-check"></i><b>12.2</b> Murphy’s Law and errors in your pipeline</a></li>
<li class="chapter" data-level="12.3" data-path="qa-data.html"><a href="qa-data.html#error-handling-1"><i class="fa fa-check"></i><b>12.3</b> Error handling</a></li>
<li class="chapter" data-level="12.4" data-path="qa-data.html"><a href="qa-data.html#error-logging"><i class="fa fa-check"></i><b>12.4</b> Error logging</a><ul>
<li class="chapter" data-level="12.4.1" data-path="qa-data.html"><a href="qa-data.html#pipeline-pitfalls"><i class="fa fa-check"></i><b>12.4.1</b> Pipeline pitfalls</a></li>
<li class="chapter" data-level="12.4.2" data-path="qa-data.html"><a href="qa-data.html#error-logging-using-futile.logger"><i class="fa fa-check"></i><b>12.4.2</b> Error logging using <code>futile.logger</code></a></li>
<li class="chapter" data-level="12.4.3" data-path="qa-data.html"><a href="qa-data.html#logging-to-file"><i class="fa fa-check"></i><b>12.4.3</b> Logging to file</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="qa-data.html"><a href="qa-data.html#proof-calculation"><i class="fa fa-check"></i><b>12.5</b> Proof calculation</a></li>
<li class="chapter" data-level="12.6" data-path="qa-data.html"><a href="qa-data.html#when-should-one-stop-testing-software"><i class="fa fa-check"></i><b>12.6</b> When should one stop testing software?</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="pub.html"><a href="pub.html"><i class="fa fa-check"></i><b>13</b> Producing the publication</a><ul>
<li class="chapter" data-level="13.1" data-path="pub.html"><a href="pub.html#r-markdown-overview"><i class="fa fa-check"></i><b>13.1</b> R Markdown overview</a><ul>
<li class="chapter" data-level="13.1.1" data-path="pub.html"><a href="pub.html#prerequisites"><i class="fa fa-check"></i><b>13.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="pub.html"><a href="pub.html#r-markdown-basics"><i class="fa fa-check"></i><b>13.2</b> R Markdown basics</a></li>
<li class="chapter" data-level="13.3" data-path="pub.html"><a href="pub.html#text-formatting-with-markdown"><i class="fa fa-check"></i><b>13.3</b> Text formatting with Markdown</a></li>
<li class="chapter" data-level="13.4" data-path="pub.html"><a href="pub.html#code-chunks"><i class="fa fa-check"></i><b>13.4</b> Code chunks</a><ul>
<li class="chapter" data-level="13.4.1" data-path="pub.html"><a href="pub.html#chunking-code-in-rap"><i class="fa fa-check"></i><b>13.4.1</b> Chunking code in RAP</a></li>
<li class="chapter" data-level="13.4.2" data-path="pub.html"><a href="pub.html#chunk-name"><i class="fa fa-check"></i><b>13.4.2</b> Chunk name</a></li>
<li class="chapter" data-level="13.4.3" data-path="pub.html"><a href="pub.html#chunk-options"><i class="fa fa-check"></i><b>13.4.3</b> Chunk options</a></li>
<li class="chapter" data-level="13.4.4" data-path="pub.html"><a href="pub.html#global-options"><i class="fa fa-check"></i><b>13.4.4</b> Global options</a></li>
<li class="chapter" data-level="13.4.5" data-path="pub.html"><a href="pub.html#inline-code"><i class="fa fa-check"></i><b>13.4.5</b> Inline code</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="pub.html"><a href="pub.html#yaml-header"><i class="fa fa-check"></i><b>13.5</b> YAML header</a><ul>
<li class="chapter" data-level="13.5.1" data-path="pub.html"><a href="pub.html#output-style"><i class="fa fa-check"></i><b>13.5.1</b> Output style</a></li>
<li class="chapter" data-level="13.5.2" data-path="pub.html"><a href="pub.html#parameters"><i class="fa fa-check"></i><b>13.5.2</b> Parameters</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="pub.html"><a href="pub.html#further-reading-1"><i class="fa fa-check"></i><b>13.6</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="final.html"><a href="final.html"><i class="fa fa-check"></i><b>14</b> Final Thoughts</a><ul>
<li class="chapter" data-level="14.1" data-path="final.html"><a href="final.html#a-structured-rap-course"><i class="fa fa-check"></i><b>14.1</b> A Structured RAP Course</a></li>
<li class="chapter" data-level="14.2" data-path="final.html"><a href="final.html#rap-mooc"><i class="fa fa-check"></i><b>14.2</b> RAP MOOC</a></li>
<li class="chapter" data-level="14.3" data-path="final.html"><a href="final.html#user-feedback"><i class="fa fa-check"></i><b>14.3</b> User feedback</a></li>
<li class="chapter" data-level="14.4" data-path="final.html"><a href="final.html#just-the-beginning"><i class="fa fa-check"></i><b>14.4</b> Just the beginning…</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RAP Companion</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vs" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Version Control</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>Few software engineers would embark on a new project without using some sort of <a href="https://en.wikipedia.org/wiki/Version_control">version control software</a>. Version control software allows us to track the three Ws: <strong>Who made Which change, and Why?</strong>. Tools like <a href="https://git-scm.com/">git</a> can be used to track files of any type, but are particularly useful for code in text files for example R or Python code.</p>
<p>Whilst git can be used locally on a single machine, or many networked machines, git can also be hooked up to free cloud services such as <a href="https://github.com/">GitHub</a>, <a href="https://about.gitlab.com/">GitLab</a>, or Bitbucket(<a href="https://bitbucket.org/" class="uri">https://bitbucket.org/</a>). Each of these services provides hosting for your version control repository, and makes the code open and easy to share. The entire project we are working on with DCMS can be seen on <a href="https://github.com/ukgovdatascience/eesectors">GitHub</a>.</p>
<p><a href="https://github.com/ukgovdatascience/eesectors" target="_blank"><img src="images/eesectors_project.png" style="display: block; margin: auto;" /></a></p>
<p>Obviously this won’t be appropriate for all Government projects (and solutions do exist to allow these services to be run within secure systems), but in our work with DCMS, we were able to publish all of our code openly. You can use <a href="https://github.com/ukgovdatascience/eesectors">our code</a> to run an example based on the 2016 publication, but producing the entire publication from end to end would require access to data which is not published openly. Below is a screenshot from the commit history showing collaboration between data scientists in DCMS and GDS. The full page can be seen on <a href="https://github.com/ukgovdatascience/eesectors/commits/master">GitHub</a>.</p>
<p><a href="https://github.com/ukgovdatascience/eesectors/commits/master" target="_blank"><img src="images/commit_history.png" style="display: block; margin: auto;" /></a></p>
<p>Using a service like GitHub allows us to formalise the system of quality assurance (QA) in an auditable way. We can configure GitHub to require a code review by another person before the update to the code (this is called a <a href="https://help.github.com/articles/about-pull-requests/">pull request</a>) is accepted into the main workstream of the project. You can see this in the screenshot below which relates to a pull request which fixed a <a href="https://github.com/ukgovdatascience/eesectors/pull/71">minor bug in the prototype</a>. The work to fix it was done by a data scientist at DCMS, and reviewed by a data scientist from GDS.</p>
<p><a href="https://gdsdata.blog.gov.uk/2017/03/27/reproducible-analytical-pipeline/" target="_blank"><img src="images/looks_good.png" style="display: block; margin: auto;" /></a></p>
<p>The open nature of the good is great for transparency and facilitates review. The entire community can contribute to helping QA your code and identify <a href="https://github.com/ukgovdatascience/eesectors/issues">issues or bugs</a>. If you are lucky, they will not only report the bug / issue, but may also offer a fix for your code in the form of a pull request.</p>
</div>
<div id="useful-resources" class="section level2">
<h2><span class="header-section-number">6.2</span> Useful resources</h2>
<div id="graphical-user-interface-focus" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Graphical user interface focus</h3>
<p>A <a href="http://happygitwithr.com/">useful book</a> on Git and Github that should cover all your needs for those who are uncomfortable working in a command line interface. This will cover most of your Git and Github workflow needs for collaborating in a team. However, we recommend putting the effort into learning git without a GUI, so that you benefit from the full funcitonality on offer.</p>
</div>
<div id="git-and-rstudio" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Git and RStudio</h3>
<p>You can also use <a href="http://r-pkgs.had.co.nz/git.html">git and Github within R Studio</a>.</p>
</div>
<div id="command-line-focus" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Command line focus</h3>
<p>However, the terminal isn’t that scary really and we recommend using it from the outset. Here’s a <a href="https://swcarpentry.github.io/git-novice/">video tutorial</a> that provides a good introduction and does not expect any experience of using the Unix shell (the terminal or command line).</p>
<p>For a comprehensive tome try the <a href="https://git-scm.com/book/en/v2">Pro Git book</a>.</p>
</div>
</div>
<div id="typical-workflow" class="section level2">
<h2><span class="header-section-number">6.3</span> Typical workflow</h2>
<p>When you first start using git it can be difficult to remember all the commonly used commands (you might find it useful to keep a list of them in a text editor).</p>
<p>We give a simple workflow here (assuming you are collaborating on Github with a small team and have <a href="https://help.github.com/articles/creating-a-new-repository/">set up a repo</a> called <code>my_repo</code> with the origin and remote set (try to avoid hyphens in names)). Remember to remove the comments (the #) when copying and pasting into the terminal. You will also need to give your new feature branch a good name.</p>
<ol style="list-style-type: decimal">
<li>Open your terminal (command line tool).</li>
<li>Navigate to <code>my_repo</code> using <code>cd</code>.</li>
<li>Check you are up-to-date:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  git checkout master</span>
<span class="co">#  git pull</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Create your new feature branch to work on and get to work (track changes by adding and comitting locally as usual):</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  git checkout -b feature/post_name</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li><a href="https://stackoverflow.com/questions/5189560/squash-my-last-x-commits-together-using-git">Squash your commits</a> if appropriate, then push your new branch to Github. You will want to squash all commits together associated with one discrete piece of work (e.g. coding one function).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  git push origin feature/post_name -u</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li><p>On Github create a <a href="https://help.github.com/articles/about-pull-requests/">pull request</a> and ask a colleague to review your changes before merging with the <code>master</code> branch (you can assign a reviewer in the PR page on Github).</p></li>
<li><p>If accepted (and it passes all necessary checks) you’re new feature will have been merged on Github. Fetch these changes locally.</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  git checkout master</span>
<span class="co">#  git pull</span></code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>You have a new master on Github. Pull it to your local machine and the development cycle starts again!</li>
</ol>
<p>CAVEAT: this workflow is not appropriate for large open collaborations, where fork and pull is preferred.</p>
</div>
<div id="branch-naming-etiquette" class="section level2">
<h2><span class="header-section-number">6.4</span> Branch naming etiquette</h2>
<p>Generally I will start a new branch to either add a new feature <code>git branch feature/cool_new_feature</code> such as for testing or adding a new function <code>git branch feature/sen_function_name</code>. Or if fixing a bug or problem. We should be writing these on the Github <a href="https://github.com/ukgovdatascience/rap_companion/issues">issues page for the package</a>. We can then title our branches to tackle specific issues <code>git branch fix/issue_number</code>.<br />
It’s good to push your branches to Github if your working on it prior to it being finished so we all know what everyone is working on. You can simply put [WIP] (Work in progress) in the title of the PR on Github to let people know its not ready for review yet.</p>
</div>
<div id="watermarking" class="section level2">
<h2><span class="header-section-number">6.5</span> Watermarking</h2>
<p>Imagine if someone asks you to reproduce some historic analysis further down the line. This will be easy if you’ve used git as long as you know which version of your code was used to produce the report (packrat also facilitates this). You can then load that <a href="http://r-pkgs.had.co.nz/description.html#version">version</a> of the code to repeat the analysis and reproduce the report.</p>
<p>As an additional measure, or if you find versioning intimidating, you could watermark your report by citing the git commit used to generate it, as demonstrated below and in the stackoverflow answer by <a href="https://stackoverflow.com/questions/32260956/show-git-version-in-r-code">Wander Nauta, 2015</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">system</span>(<span class="st">&quot;git rev-parse --short HEAD&quot;</span>,
             <span class="dt">intern =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] &quot;07a05c7&quot;</code></pre>
<p>This commit hash can be used to “revert” back to the code at the time the report was produced, fool around and reproduce the original report. You also have the flexibility to do other things which are explored in this <a href="https://stackoverflow.com/questions/4114095/how-to-revert-git-repository-to-a-previous-commit">Stack Overflow answer</a>. This feature of version control is what makes our analytical pipelines reproducible.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="open.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
